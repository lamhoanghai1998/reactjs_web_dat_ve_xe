{"ast":null,"code":"var _jsxFileName = \"E:\\\\vexedientu\\\\Front-End\\\\dath-react\\\\src\\\\components\\\\ThanhToan.js\";\nimport React, { Component } from \"react\";\nimport { PayPalButton } from \"react-paypal-button-v2\";\nimport Axios from \"axios\";\nimport retesData from \"../data/ratesData.json\";\nimport swal from \"sweetalert\";\nimport { Redirect } from \"react-router-dom\";\nexport default class ThanhToan extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isGoNext: false\n    };\n  }\n\n  postDatVe() {\n    // dữ liệu đẩy xuống backend xử lý\n    var postData = this.state;\n    let axiosConfig = {\n      headers: {\n        \"Content-Type\": \"application/json;charset=UTF-8\",\n        \"Access-Control-Allow-Origin\": \"*\"\n      }\n    };\n    Axios.post(\"/api/bookticket\", postData, axiosConfig).then(res => {\n      console.log(\"RESPONSE RECEIVED: \", res);\n      swal({\n        title: \"Tuyệt vời!\",\n        text: \"Vé của bạn đã được đặt thành công!\",\n        icon: \"success\"\n      }).then(() => {\n        this.setState({\n          isGoNext: true\n        });\n      });\n    }).catch(err => {\n      console.log(\"AXIOS ERROR: \", err);\n    });\n  }\n\n  // dữ liệu bước điền thông tin khách hàng\n  UNSAFE_componentWillMount() {\n    if (typeof Storage !== \"undefined\") {\n      // get sessionStorage\n      this.step1 = JSON.parse(sessionStorage.getItem(\"chonTuyen\"));\n      this.step2 = JSON.parse(sessionStorage.getItem(\"chonghe\"));\n      this.step3 = JSON.parse(sessionStorage.getItem(\"thongtinkhachhang\")); // chuyển tiền Việt nam qua tiền đô la để thanh toán paypal\n      //console.log(this.doiTien(this.step2.tongtien, \"USD\", false));\n      //console.log(typeof this.doiTien(this.step2.tongtien, \"USD\", false));\n\n      this.setState({\n        tuyen: this.step1.inputTuyen,\n        ngaydi: this.step1.ngayDi,\n        // ép mảng ghế về chuỗi cho phù hợp với cơ sở dữ liệu\n        ghedat: this.step2.seatReserved.toString(),\n        // các ghế đã đặt ở dạng mảng để có thể in ra giao diện\n        ghe: this.step2.seatReserved,\n        tongtien: this.step2.tongtien,\n        hoten: this.step3.inputHoTen,\n        sdt: this.step3.inputPhone,\n        email: this.step3.inputEmail,\n        diachi: this.step3.inputAddress,\n        idxe: this.step2.idXe,\n        idlichchay: this.step2.idLichChay,\n        idtuyen: this.step1.idTuyen,\n        tongtienUSD: this.doiTien(this.step2.tongtien, \"USD\", false)\n      }, () => {\n        return console.log(this.state);\n      });\n    } else {\n      alert(\"Vui lòng quay lại trang chủ\");\n    }\n  } // ham chuyen đổi tỷ giá ngoại tệ\n\n\n  doiTien(money, code, encode = true) {\n    const input = parseFloat(money);\n\n    if (Number.isNaN(input)) {\n      return \"\";\n    }\n\n    const currency = retesData.rates[0].value.find(item => item.code === code);\n\n    if (!currency) {\n      return \"\";\n    }\n\n    const sell = parseFloat(currency.sell.replace(\",\", \"\"));\n    const output = encode ? input * sell : input / sell;\n    const rounded = (Math.round(output * 1000) / 1000).toFixed(2);\n    return rounded.toString();\n  }\n\n  render() {\n    var ngaydi = this.state.ngaydi;\n    var tempdate = \"\";\n    var inngaydi = tempdate.concat(ngaydi.substr(8, 2), \" \", ngaydi.substr(4, 1), \" \", ngaydi.substr(5, 2), \" \", ngaydi.substr(4, 1), \" \", ngaydi.substr(0, 4));\n    var pay = this.state.tongtienUSD;\n\n    if (this.state.isGoNext === true) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"section\", {\n      className: \"payment\",\n      style: {\n        marginTop: \"100px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-stepper-horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-circle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 15\n      }\n    }, \"directions_bus\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }\n    }, \"Ch\\u1ECDn tuy\\u1EBFn\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-bar-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-bar-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-circle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 15\n      }\n    }, \"event_seat\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }\n    }, \"Ch\\u1ECDn gh\\u1EBF\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-bar-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-bar-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-circle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 15\n      }\n    }, \"edit\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }\n    }, \"\\u0110i\\u1EC1n th\\xF4ng tin\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-bar-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-bar-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-circle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }\n    }, \"credit_card\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }\n    }, \"Thanh to\\xE1n\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-bar-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-bar-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-warning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 13\n      }\n    }, \"L\\u01B0u \\xFD !\"), \" N\\u1EBFu qu\\xFD kh\\xE1ch ch\\u1ECDn thanh to\\xE1n chuy\\u1EC3n kho\\u1EA3n, vui l\\xF2ng chuy\\u1EC3n ti\\u1EC1n v\\xE9 trong v\\xF2ng \", /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 48\n      }\n    }, \"12 ti\\u1EBFng\"), \" k\\u1EC3 t\\u1EEB th\\u1EDDi gian \\u0111\\u1EB7t v\\xE9.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-6 col-md-6 col-sm-12 col-xs-12 col-ms-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header card-header-rose\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 19\n      }\n    }, \"Ch\\u1ECDn ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\xE1n\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(PayPalButton, {\n      amount: pay,\n      onSuccess: (details, data) => {\n        this.postDatVe();\n      },\n      shippingPreference: \"NO_SHIPPING\",\n      options: {\n        clientId: \"AWy4VjiZvKYejBmofoCTe_u7GKfgD5h8QJfyXCUVb-EnTogDnLBb-pPLEV8wH-LLGHoWaDyTIYqHB0WS\",\n        currency: \"USD\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 19\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-6 col-md-6 col-sm-12 col-xs-12 col-ms-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header card-header-rose\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 19\n      }\n    }, \"Th\\xF4ng tin \\u0111\\u1EB7t v\\xE9\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form-horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 33\n      }\n    }, \"Tuy\\u1EBFn\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 35\n      }\n    }, this.state.tuyen))), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 33\n      }\n    }, \"Ng\\xE0y \\u0111i \"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 35\n      }\n    }, inngaydi))), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 33\n      }\n    }, \"Gh\\u1EBF \"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 35\n      }\n    }, this.state.ghe.map(item => {\n      return item + \",   \";\n    })))), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 33\n      }\n    }, \"H\\u1ECD T\\xEAn \"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 35\n      }\n    }, this.state.hoten))), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 33\n      }\n    }, \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i \"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 35\n      }\n    }, this.state.sdt))), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 33\n      }\n    }, \"T\\u1ED5ng ti\\u1EC1n \"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 35\n      }\n    }, this.state.tongtien.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\"), \" \", \"VN\\u0110\"))), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 33\n      }\n    }, \"Thanh to\\xE1n Paypal\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 35\n      }\n    }, pay, \" USD\")))))))))))))), /*#__PURE__*/React.createElement(\"script\", {\n      src: \"https://www.paypal.com/sdk/js?client-id=sb\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"script\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }\n    }, \"paypal.Buttons().render(\\\"body\\\");\"));\n  }\n\n}","map":{"version":3,"sources":["E:/vexedientu/Front-End/dath-react/src/components/ThanhToan.js"],"names":["React","Component","PayPalButton","Axios","retesData","swal","Redirect","ThanhToan","constructor","props","state","isGoNext","postDatVe","postData","axiosConfig","headers","post","then","res","console","log","title","text","icon","setState","catch","err","UNSAFE_componentWillMount","Storage","step1","JSON","parse","sessionStorage","getItem","step2","step3","tuyen","inputTuyen","ngaydi","ngayDi","ghedat","seatReserved","toString","ghe","tongtien","hoten","inputHoTen","sdt","inputPhone","email","inputEmail","diachi","inputAddress","idxe","idXe","idlichchay","idLichChay","idtuyen","idTuyen","tongtienUSD","doiTien","alert","money","code","encode","input","parseFloat","Number","isNaN","currency","rates","value","find","item","sell","replace","output","rounded","Math","round","toFixed","render","tempdate","inngaydi","concat","substr","pay","marginTop","details","data","clientId","fontWeight","map"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { PayPalButton } from \"react-paypal-button-v2\";\r\nimport Axios from \"axios\";\r\nimport retesData from \"../data/ratesData.json\";\r\nimport swal from \"sweetalert\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nexport default class ThanhToan extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isGoNext: false,\r\n    };\r\n  }\r\n\r\n  postDatVe() {\r\n    // dữ liệu đẩy xuống backend xử lý\r\n    var postData = this.state;\r\n    let axiosConfig = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n      },\r\n    };\r\n\r\n    Axios.post(\"/api/bookticket\", postData, axiosConfig)\r\n      .then((res) => {\r\n        console.log(\"RESPONSE RECEIVED: \", res);\r\n        swal({\r\n          title: \"Tuyệt vời!\",\r\n          text: \"Vé của bạn đã được đặt thành công!\",\r\n          icon: \"success\",\r\n        }).then(() => {\r\n          this.setState({ isGoNext: true });\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"AXIOS ERROR: \", err);\r\n      });\r\n  }\r\n\r\n  step1; // dữ liệu bước chọn tuyến\r\n  step2; // dữ liệu bước chọn ghế\r\n  step3; // dữ liệu bước điền thông tin khách hàng\r\n  UNSAFE_componentWillMount() {\r\n    if (typeof Storage !== \"undefined\") {\r\n      // get sessionStorage\r\n      this.step1 = JSON.parse(sessionStorage.getItem(\"chonTuyen\"));\r\n      this.step2 = JSON.parse(sessionStorage.getItem(\"chonghe\"));\r\n      this.step3 = JSON.parse(sessionStorage.getItem(\"thongtinkhachhang\"));\r\n      // chuyển tiền Việt nam qua tiền đô la để thanh toán paypal\r\n      //console.log(this.doiTien(this.step2.tongtien, \"USD\", false));\r\n      //console.log(typeof this.doiTien(this.step2.tongtien, \"USD\", false));\r\n      this.setState(\r\n        {\r\n          tuyen: this.step1.inputTuyen,\r\n          ngaydi: this.step1.ngayDi,\r\n          // ép mảng ghế về chuỗi cho phù hợp với cơ sở dữ liệu\r\n          ghedat: this.step2.seatReserved.toString(),\r\n          // các ghế đã đặt ở dạng mảng để có thể in ra giao diện\r\n          ghe: this.step2.seatReserved,\r\n          tongtien: this.step2.tongtien,\r\n          hoten: this.step3.inputHoTen,\r\n          sdt: this.step3.inputPhone,\r\n          email: this.step3.inputEmail,\r\n          diachi: this.step3.inputAddress,\r\n          idxe: this.step2.idXe,\r\n          idlichchay: this.step2.idLichChay,\r\n          idtuyen: this.step1.idTuyen,\r\n          tongtienUSD: this.doiTien(this.step2.tongtien, \"USD\", false),\r\n        },\r\n        () => {\r\n          return console.log(this.state);\r\n        }\r\n      );\r\n    } else {\r\n      alert(\"Vui lòng quay lại trang chủ\");\r\n    }\r\n  }\r\n\r\n  // ham chuyen đổi tỷ giá ngoại tệ\r\n  doiTien(money, code, encode = true) {\r\n    const input = parseFloat(money);\r\n    if (Number.isNaN(input)) {\r\n      return \"\";\r\n    }\r\n    const currency = retesData.rates[0].value.find(\r\n      (item) => item.code === code\r\n    );\r\n    if (!currency) {\r\n      return \"\";\r\n    }\r\n    const sell = parseFloat(currency.sell.replace(\",\", \"\"));\r\n    const output = encode ? input * sell : input / sell;\r\n    const rounded = (Math.round(output * 1000) / 1000).toFixed(2);\r\n    return rounded.toString();\r\n  }\r\n\r\n  render() {\r\n    var ngaydi = this.state.ngaydi;\r\n    var tempdate = \"\";\r\n    var inngaydi = tempdate.concat(\r\n      ngaydi.substr(8, 2),\r\n      \" \",\r\n      ngaydi.substr(4, 1),\r\n      \" \",\r\n      ngaydi.substr(5, 2),\r\n      \" \",\r\n      ngaydi.substr(4, 1),\r\n      \" \",\r\n      ngaydi.substr(0, 4)\r\n    );\r\n    var pay = this.state.tongtienUSD;\r\n    if (this.state.isGoNext === true) {\r\n      return <Redirect to=\"/\" />;\r\n    }\r\n\r\n    return (\r\n      <section className=\"payment\" style={{ marginTop: \"100px\" }}>\r\n        <div className=\"md-stepper-horizontal\">\r\n          <div className=\"md-step active\">\r\n            <div className=\"md-step-circle\">\r\n              <span className=\"material-icons\">directions_bus</span>\r\n            </div>\r\n            <div className=\"md-step-title\">Chọn tuyến</div>\r\n            <div className=\"md-step-bar-left\" />\r\n            <div className=\"md-step-bar-right\" />\r\n          </div>\r\n          <div className=\"md-step active\">\r\n            <div className=\"md-step-circle\">\r\n              <span className=\"material-icons\">event_seat</span>\r\n            </div>\r\n            <div className=\"md-step-title\">Chọn ghế</div>\r\n            <div className=\"md-step-bar-left\" />\r\n            <div className=\"md-step-bar-right\" />\r\n          </div>\r\n          <div className=\"md-step active\">\r\n            <div className=\"md-step-circle\">\r\n              <span className=\"material-icons\">edit</span>\r\n            </div>\r\n            <div className=\"md-step-title\">Điền thông tin</div>\r\n            <div className=\"md-step-bar-left\" />\r\n            <div className=\"md-step-bar-right\" />\r\n          </div>\r\n          <div className=\"md-step active\">\r\n            <div className=\"md-step-circle\">\r\n              <span className=\"material-icons\">credit_card</span>\r\n            </div>\r\n            <div className=\"md-step-title\">Thanh toán</div>\r\n            <div className=\"md-step-bar-left\" />\r\n            <div className=\"md-step-bar-right\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"container\">\r\n          <div className=\"alert alert-warning\">\r\n            <strong>Lưu ý !</strong> Nếu quý khách chọn thanh toán chuyển khoản,\r\n            vui lòng chuyển tiền vé trong vòng <strong>12 tiếng</strong> kể từ\r\n            thời gian đặt vé.\r\n          </div>\r\n          <div className=\"row\">\r\n            <div className=\"col-lg-6 col-md-6 col-sm-12 col-xs-12 col-ms-12\">\r\n              <div className=\"card\">\r\n                <div className=\"card-header card-header-rose\">\r\n                  <h4 className=\"card-title\">Chọn phương thức thanh toán</h4>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  <PayPalButton\r\n                    amount={pay}\r\n                    onSuccess={(details, data) => {\r\n                      this.postDatVe();\r\n                    }}\r\n                    shippingPreference=\"NO_SHIPPING\"\r\n                    options={{\r\n                      clientId:\r\n                        \"AWy4VjiZvKYejBmofoCTe_u7GKfgD5h8QJfyXCUVb-EnTogDnLBb-pPLEV8wH-LLGHoWaDyTIYqHB0WS\",\r\n                      currency: \"USD\",\r\n                    }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-lg-6 col-md-6 col-sm-12 col-xs-12 col-ms-12\">\r\n              <div className=\"card\">\r\n                <div className=\"card-header card-header-rose\">\r\n                  <h4 className=\"card-title\">Thông tin đặt vé</h4>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  <div className=\"panel\">\r\n                    <form className=\"form-horizontal\">\r\n                      <div className=\"form-group\">\r\n                        <div className=\"col-md-12\">\r\n                          <table className=\"table\">\r\n                            <tbody>\r\n                              <tr>\r\n                                <td>Tuyến</td>\r\n                                <td>\r\n                                  <span style={{ fontWeight: \"bold\" }}>\r\n                                    {this.state.tuyen}\r\n                                  </span>\r\n                                </td>\r\n                              </tr>\r\n                              <tr>\r\n                                <td>Ngày đi </td>\r\n                                <td>\r\n                                  <span style={{ fontWeight: \"bold\" }}>\r\n                                    {inngaydi}\r\n                                  </span>\r\n                                </td>\r\n                              </tr>\r\n                              <tr>\r\n                                <td>Ghế </td>\r\n                                <td>\r\n                                  <span style={{ fontWeight: \"bold\" }}>\r\n                                    {this.state.ghe.map((item) => {\r\n                                      return item + \",   \";\r\n                                    })}\r\n                                  </span>\r\n                                </td>\r\n                              </tr>\r\n                              <tr>\r\n                                <td>Họ Tên </td>\r\n                                <td>\r\n                                  <span style={{ fontWeight: \"bold\" }}>\r\n                                    {this.state.hoten}\r\n                                  </span>\r\n                                </td>\r\n                              </tr>\r\n                              <tr>\r\n                                <td>Số điện thoại </td>\r\n                                <td>\r\n                                  <span style={{ fontWeight: \"bold\" }}>\r\n                                    {this.state.sdt}\r\n                                  </span>\r\n                                </td>\r\n                              </tr>\r\n                              <tr>\r\n                                <td>Tổng tiền </td>\r\n                                <td>\r\n                                  <span style={{ fontWeight: \"bold\" }}>\r\n                                    {this.state.tongtien\r\n                                      .toString()\r\n                                      .replace(\r\n                                        /\\B(?=(\\d{3})+(?!\\d))/g,\r\n                                        \",\"\r\n                                      )}{\" \"}\r\n                                    VNĐ\r\n                                  </span>\r\n                                </td>\r\n                              </tr>\r\n                              <tr>\r\n                                <td>Thanh toán Paypal</td>\r\n                                <td>\r\n                                  <span style={{ fontWeight: \"bold\" }}>\r\n                                    {pay} USD\r\n                                  </span>\r\n                                </td>\r\n                              </tr>\r\n                            </tbody>\r\n                          </table>\r\n                        </div>\r\n                      </div>\r\n                      {/* <div className=\"form-group\">\r\n                        <div className=\"col-lg-12 col-md-12 col-sm-2 col-xs-12 col-ms-12\">\r\n                          <button className=\"btn btn-primary btn-block\">\r\n                            Thanh Toán\r\n                          </button>\r\n                        </div>\r\n                      </div> */}\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <script src=\"https://www.paypal.com/sdk/js?client-id=sb\"></script>\r\n        <script>paypal.Buttons().render(\"body\");</script>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}